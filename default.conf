server {
    listen 8080;
    server_name _;
    
    # 1. KOREKSI ROOT: Gunakan /app (sesuai WORKDIR di Dockerfile)
    root /app; 
    index index.php index.html;

    # KRUSIAL: Mapping request /public/ ke folder /app/public
    location /public/ {
        # 2. KOREKSI ALIAS: Gunakan /app/public/
        alias /app/public/; 
        try_files $uri @fallback;
        expires 1y;
        access_log off;
    }

    # Blok PHP (gunakan $document_root, yang sudah di set ke /app)
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    # Fallback (akan mencari index.php di /app/index.php)
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
}